import{d as i}from"./vendor-2ac6fe9f.js";import{C as o}from"./index-00a413c8.js";import{c as a,M as c,g as l,n as d}from"./index-8798f8d2.js";const _=a.friendsRepo===""||a.friendsRepo===void 0,g={name:"Friend",components:{Comment:o,Markdown:c},data(){return{filterFriends:[],loseContact:[],notAdded:[],loading:!0}},computed:{friendInfo(){return`\`\`\`js
name: ${this.$config.name}
url: ${this.$config.url}
avatar: ${this.$config.avatar}
desc: ${this.$config.desc}
\`\`\``},showLoseContact(){return this.loseContact.length>0},showNotAdded(){return this.notAdded.length>0}},created(){this.getFriendsFn()},methods:{...i({getFriendsCountAction:"github/getFriendsCountAction",getFriendsAction:"github/getFriendsAction",getBlogFriendsAction:"github/getBlogFriendsAction"}),parseFriends(n){n.forEach(t=>{const e=t.labels.map(r=>r.name);e.includes("未添加")?this.notAdded.push(t):e.includes("失联")?this.loseContact.push(t):this.filterFriends.push(t)})},parseBlogFriends(n){n.forEach(t=>{const s=t.tag;s.name==="未添加"?this.notAdded.push(t):s.name==="失联"?this.loseContact.push(t):this.filterFriends.push(t)})},async getFriendsCountFn(){return await this.getFriendsCountAction().catch(n=>{throw this.$message({content:"获取友链总数失败",type:"error"}),new Error(n)})},async getFriendsFn(){if(_){const{url:n,pageSize:t}=await l().catch(e=>{throw this.$message({content:"获取友链失败",type:"error"}),new Error(e)}),s=await this.getBlogFriendsAction({url:n,page:1,pageSize:t}).catch(e=>{throw this.$message({content:"获取友链失败",type:"error"}),new Error(e)}).finally(()=>{this.loading=!1});this.parseBlogFriends(s)}else{const n=await this.getFriendsCountFn().catch(s=>{throw this.$message({content:"获取友链总数失败",type:"error"}),new Error(s)}),t=await this.getFriendsAction({page:1,pageSize:n}).catch(s=>{throw this.$message({content:"获取友链失败",type:"error"}),new Error(s)}).finally(()=>{this.loading=!1});this.parseFriends(t)}}}};var h=function(){var t=this,s=t._self._c;return s("div",{staticClass:"friend-wrap"},[s("div",{staticClass:"friend"},[s("section",[s("h2",[s("SvgIcon",{attrs:{name:"lianjie"}}),t._v(" "+t._s(t.$t("friend_info")))],1),s("div",{staticClass:"info-wrap"},[s("p",[t._v(t._s(t.$t("exchange_link")))]),s("p",[t._v(t._s(t.$t("this_is_my_friend")))]),s("Markdown",{attrs:{content:t.friendInfo,"need-parsed":!0}})],1)]),s("section",[s("h2",[s("SvgIcon",{attrs:{name:"zhinan"}}),t._v(" "+t._s(t.$t("my_friends")))],1),s("p",[t._v("※ "+t._s(t.$t("randomly_sorted")))]),s("p",[t._v("※ "+t._s(t.$t("own_storage_space")))]),s("ul",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content"},t._l(t.filterFriends,function(e){return s("li",{key:e.number},[s("a",{staticClass:"info",attrs:{href:e.url,rel:"noopener noreferrer",target:"_blank"}},[s("figure",{staticClass:"avatar"},[s("img",{attrs:{src:e.avatar,alt:"avatar",loading:"lazy"}})]),s("div",{staticClass:"text"},[s("h3",{staticClass:"name"},[t._v(t._s(e.name))]),s("p",{staticClass:"desc"},[t._v(t._s(e.desc))])])])])}),0)]),t.showLoseContact?s("section",[s("p",{staticClass:"strong"},[t._v(" "+t._s(t.$t("cannot_visit"))+" ")]),s("ul",{staticClass:"content"},t._l(t.loseContact,function(e){return s("li",{key:e.number},[s("a",{staticClass:"info",attrs:{href:e.url,rel:"noopener noreferrer",target:"_blank"}},[s("figure",{staticClass:"avatar"},[s("img",{attrs:{src:e.avatar,alt:"avatar",loading:"lazy"}})]),s("div",{staticClass:"text"},[s("h3",{staticClass:"name"},[t._v(t._s(e.name))]),s("p",{staticClass:"desc"},[t._v(t._s(e.desc))])])])])}),0),s("p",[t._v(t._s(t.$t("please_restore")))])]):t._e(),t.showNotAdded?s("section",[s("p",{staticClass:"strong"},[t._v(" "+t._s(t.$t("unblied_friends"))+" ")]),s("ul",{staticClass:"not-added"},t._l(t.notAdded,function(e){return s("li",{key:e.number},[s("h3",{staticClass:"name"},[t._v(" "+t._s(e.name)+" ")])])}),0),s("p",[t._v(t._s(t.$t("continue_include")))])]):t._e()]),s("Comment")],1)},u=[],p=d(g,h,u,!1,null,"2d40951b",null,null);const C=p.exports;export{C as default};
